{
  "hooks": [
    {
      "id": "datadog-check-instrumentation",
      "name": "Check Datadog Instrumentation",
      "description": "Validates that dd-trace is properly initialized and unified service tags are configured before deployment. Checks for common instrumentation issues.",
      "trigger": "pre-deploy",
      "script": "./scripts/check-instrumentation.sh",
      "env": {
        "DD_API_KEY": "${DD_API_KEY}",
        "DD_APP_KEY": "${DD_APP_KEY}",
        "DD_SERVICE": "${DD_SERVICE}",
        "DD_ENV": "${DD_ENV:-production}",
        "DD_VERSION": "${DD_VERSION}"
      },
      "timeout": 120,
      "failOnError": false,
      "conditions": {
        "branches": ["main", "master", "release/*"],
        "events": ["push", "workflow_dispatch"]
      }
    }
  ]
}
