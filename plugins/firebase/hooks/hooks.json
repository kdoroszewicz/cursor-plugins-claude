{
  "hooks": [
    {
      "event": "on_save",
      "description": "Validate Firestore security rules syntax on save",
      "match": ["firestore.rules", "storage.rules", "**/*.rules"],
      "command": "firebase emulators:exec --only firestore 'echo Rules compiled successfully' 2>&1 || echo 'Warning: Could not validate rules. Is the Firebase CLI installed?'"
    },
    {
      "event": "on_save",
      "description": "Lint Cloud Functions TypeScript on save",
      "match": ["functions/src/**/*.ts"],
      "command": "cd functions && npx tsc --noEmit --pretty 2>&1 || true"
    },
    {
      "event": "on_commit",
      "description": "Run Firestore security rules tests before commit",
      "match": ["firestore.rules", "storage.rules"],
      "command": "npm test --prefix functions 2>&1 || echo 'Warning: Security rules tests not configured.'"
    },
    {
      "event": "on_deploy",
      "description": "Deploy Firebase services",
      "command": "firebase deploy"
    }
  ]
}
